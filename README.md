# LLM Context Generator Streamlit App

## Overview

This Streamlit application provides a user interface to generate a single, formatted context file from various source files (including PDFs and text-based files like `.txt`, `.md`, source code, etc.). It utilizes the `llama-parse` and `files-to-prompt` command-line tools to achieve this.

The primary goal is to easily prepare large amounts of context (e.g., entire codebases, documentation sets) for use with Large Language Models (LLMs). The output is formatted using Claude XML tags (`<document path="...">...</document>`) as generated by `files-to-prompt --cxml`.

**Important:** PDF parsing relies on the external `llama-parse` tool which requires a one-time manual authentication step (`llama-parse auth`). This app checks if authentication has been done but does **not** handle any API keys itself.

## Features

* **PDF Parsing:** Uses `llama-parse` to extract text content from PDF files into Markdown format.
* **Authentication Check:** Checks if `llama-parse` has been authenticated before attempting PDF parsing and provides instructions if not.
* **Text File Processing:** Includes content from various text files found in specified directories.
* **Configurable Inputs/Outputs:** Specify input directories for PDFs and text files, and define the output file name and location via the UI.
* **Combined Context File:** Merges content from selected sources (PDFs, TXT, or both) into a single output file using Claude XML format.
* **Output Preview:** Displays the generated context file content within the Streamlit app.
* **Error Handling:** Provides feedback on the process via status messages and toasts.

## Prerequisites (Linux Host)

1.  **Python:** Python 3.8 or later.
2.  **pip:** Python package installer.
3.  **Node.js & npm:** Required for installing `llama-parse`.
    * Check installation: `node -v` and `npm -v`
    * Install if missing (example using `apt`): `sudo apt update && sudo apt install nodejs npm`
4.  **LlamaCloud Account & API Key:** Required **only** for the one-time `llama-parse auth` step. Get a key from [LlamaCloud](https://cloud.llamaindex.ai/).

## Setup Instructions (Linux Host)

1.  **Get the Code:**
    * Save the Python script (e.g., `context_generator_app.py`) to a directory.
    * `cd /path/to/your/app_directory`

2.  **Install Python Dependencies:**
    * Recommended: `python3 -m venv venv && source venv/bin/activate`
    * `pip install streamlit files-to-prompt` (Removed `python-dotenv`)

3.  **Install `llama-parse` CLI Tool:**
    * `npm install -g llama-parse-cli`
    * Verify: `llama-parse --version`

4.  **Authenticate `llama-parse` (CRITICAL STEP):**
    * The `llama-parse` tool requires you to store your API key locally once. **Run this command manually in your terminal:**
        ```bash
        llama-parse auth
        ```
    * Enter your LlamaCloud API key (starting with `llx-`) when prompted.
    * This creates the `~/.llama-parse/config.json` file. The Streamlit app relies on this file existing for PDF parsing.

## Usage

1.  **Prepare Input Folders:** Create and populate your PDF and TXT input directories.
2.  **Run the Streamlit App:**
    * (Activate venv if used: `source venv/bin/activate`)
    * `streamlit run context_generator_app.py`
3.  **Configure via Sidebar:** Set input/output paths.
4.  **Select Processing Options:** Choose TXT, PDF, or Both.
5.  **Generate Context:** Click the button. The app checks for `llama-parse` auth before proceeding with PDF parsing.

## Troubleshooting

* **Error: `LlamaParse Not Authenticated: ... config.json ... not found`**: You MUST run `llama-parse auth` in your terminal first. See Setup Step 4.
* **`'llama-parse'/'files-to-prompt' command not found`**: Ensure tools are installed correctly and their locations are in your system's PATH. Restart terminal after install.
* **PDF Parsing Failures (after auth):** Verify `llama-parse auth` completed successfully. Check the tool's GitHub issues. Examine error output in the Streamlit UI.
* **Permission Errors:** Check read/write permissions for input/output directories.

## Dependencies

* **`llama-parse`**: (From `llama-parse-cli` npm package) - Parses PDFs. Requires manual `llama-parse auth`.
* **`files-to-prompt`**: (From `files-to-prompt` PyPI package) - Combines files.